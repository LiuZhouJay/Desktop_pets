#include "app_oled.h"

int x ,x_trg;
int y  = 10,y_trg = 10;
int state;

extern char *weather_data;
extern char *temperature_data;

SETTING_LIST list[] ={
    {"Lylz"},
    {"zey"},
    {"lyl"},
};
unsigned char love_heart[518] = {
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0x7F,0x7F,0xFF,0xBF,0xFF,0xDF,0xFF,0xFF,0xEF,0xEF,0xFF,0xEF,0xEF,0xFF,0xFF,
    0xBF,0xFF,0x6F,0xFF,0x7F,0x6F,0xFF,0x7F,0xDF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x7F,0xBF,0xDF,0xFF,0xF7,0xFB,0xFD,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFD,0xFA,0xF9,0xE5,0x58,0x86,0x53,0x13,0x97,0x47,0x2E,
    0xAD,0x7B,0xBF,0x77,0xFF,0xDF,0x3F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xBF,0xEF,0xFB,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xEF,0xE9,0xA7,0xDD,0xE3,0xEB,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x7F,0xCC,0x92,0x31,0x93,0xD8,0x4D,
    0x53,0x90,0x65,0xD2,0x64,0x51,0x9F,0x3E,0xFD,0xF7,0x9F,0x7F,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xBF,0xFA,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0x7F,0xFF,0xBF,0x1F,0x3F,0x5F,0x2B,0x64,0x12,0x88,0xA7,0x08,0x4C,0xB1,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x27,0xFF,0xFD,0x6F,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xF9,0x5F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x7F,0x5F,0xAF,0x2F,0x5F,0x37,0x4B,
    0x55,0x14,0x99,0x25,0x92,0xD4,0xB4,0x48,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0xD9,0xFF,0x7F,0xC9,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFD,0xEF,0xBF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x0F,0x34,0x92,0x49,0x96,0xB9,0x6D,0x92,0xE2,
    0xFA,0xF9,0xFD,0xFE,0xFC,0xF9,0xFE,0xAD,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x54,0x0B,0xA2,0x4B,0x91,0x76,0xE5,0xF5,0x7E,0xDF,0xFB,0xFE,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFB,0xFF,0xDF,0xDF,0xFF,0x7F,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF8,0xE5,0xC8,0xD1,0x0E,0x75,0x80,0x85,
    0x95,0x55,0xC7,0xAB,0x53,0xA5,0x66,0x59,0x2A,0xA5,0x10,0xE2,0x8D,0xB5,0xC2,0xCD,
    0xFA,0xFD,0xBE,0xDF,0xFE,0xFF,0xFD,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFD,0xFF,0xFB,0xFF,0xF7,0xF7,0xFF,0xEF,0xFF,0xFF,0xFF,0xFF,0xDF,0xFE,0xDF,
    0xDE,0xFF,0xFC,0xED,0xEE,0xEE,0xFC,0xFF,0xF6,0xF7,0xFF,0xFF,0xFB,0xFD,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
};
void draw_progress_bar(u8g2_t *u8g2)
{
    u8g2_FirstPage(u8g2); // 进度条完
    do
    {
        for (uint8_t i = 0; i <= 99; i = i + 1)
        {
            u8g2_ClearBuffer(u8g2);

            char buff[20];
            u8g2_SetFont(u8g2, u8g2_font_ncenB08_tf); // 字体
            sprintf(buff, "%d%%", (int)(i / 100.0 * 100));
            u8g2_DrawStr(u8g2, 105, 49, buff); // 当前进度显示
            u8g2_DrawStr(u8g2, 0, 10, "Lylz");
            u8g2_DrawBox(u8g2, 2, 40, i, 10);     // 填充框实心矩形框
            u8g2_DrawFrame(u8g2, 0, 38, 103, 14); // 空心矩形框

            vTaskDelay(10 / portTICK_PERIOD_MS);
            u8g2_SendBuffer(u8g2);
        }
    } while (u8g2_NextPage(u8g2));
}

int draw_scroll_chr(int *a,int *a_trg)
{
    if(*a<*a_trg)
    {
        *a +=2;
        
    }else if(*a > *a_trg)
    {
        *a -=2;
    }else
    {
        return 0;
    }
    return 1;
}

void app_oled_init(u8g2_t u8g2)
{
    // x_trg = 64;
    // y_trg = -64;

    int list_len = sizeof(list)/sizeof(SETTING_LIST);

    u8g2_ClearBuffer(&u8g2);
    // u8g2_SetFont(&u8g2, u8g2_font_unifont_t_chinese2); // 字体

    // for(int i = 0;i < list_len;i++)
    // {
    //     u8g2_DrawStr(&u8g2, x, y+i*10, list[i].str);
    // }
    // if(draw_scroll_chr(&y,&y_trg) == 0)
    // {
    //     switch(state)
    //     {
    //         case 0:
    //         {
    //             y_trg = 0;
    //             state = 1;
    //             break;
    //         }
    //         case 1:
    //         {
    //             y_trg = 50;
    //             state = 0;
    //             break;
    //         }
    //     }
    // }
    // vTaskDelay(10 / portTICK_PERIOD_MS);
    // u8g2_DrawXBMP(&u8g2,20,0,64,64,love_heart);
    // u8g2_SetFont(&u8g2,u8g2_font_helvR08_tr);
    // u8g2_DrawButtonUTF8(&u8g2,62, 20, U8G2_BTN_BW2, 0, 2, 2, weather_data );
    // u8g2_DrawButtonUTF8(&u8g2,62, 40, U8G2_BTN_BW2, 0, 2, 2, temperature_data );

    u8g2_SetFont(&u8g2,u8g2_font_7x14_tr);
    u8g2_DrawXBMP(&u8g2,20,0,64,64,love_heart);
    
    u8g2_SendBuffer(&u8g2);
}


void draw(u8g2_t *u8g2)
{
    // int y = 1;
    // for(int x = 0;x < 256;x+=y)
    // {
    // u8g2_ClearBuffer(u8g2);
    // u8g2_SetFontMode(u8g2, 1); /*字体模式选择*/
    // u8g2_SetFontDirection(u8g2, 0); /*字体方向选择*/
    // u8g2_SetFont(u8g2, u8g2_font_7x14_tr); /*字库选择*/
    // u8g2_DrawStr(u8g2, 0, 10, "Lylz");
    //     u8g2_DrawStr(u8g2, x-128, 40, "LYL LOVE ZEY");
    // u8g2_SetFontDirection(u8g2, 1);
    // u8g2_SetFont(u8g2, u8g2_font_inb30_mn);
    // u8g2_DrawStr(u8g2, 21,8,"8");

    // u8g2_SetFontDirection(u8g2, 0);
    // u8g2_SetFont(u8g2, u8g2_font_inb24_mf);
    // u8g2_DrawStr(u8g2, 51,30,"g");
    // u8g2_DrawStr(u8g2, 67,30,"\xb2");

    // u8g2_DrawHLine(u8g2, 2, 35, 47);
    // u8g2_DrawHLine(u8g2, 3, 36, 47);
    // u8g2_DrawVLine(u8g2, 45, 32, 12);
    // u8g2_DrawVLine(u8g2, 46, 33, 12);

    // u8g2_SetFont(u8g2, u8g2_font_5x7_tr);
    // u8g2_DrawStr(u8g2, 1,54,"github.com/olikraus/u8g2");
    // u8g2_SendBuffer(u8g2);
    // }
}
